# jup-sdk-repro

Node version: v18.14.2
Yarn version: 1.22.19

Run:

```
$ yarn install
$ npx ts-node repro.ts
```

Error:

```
/home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@solana/web3.js"),t=require("lru-cache"),n=require("@project-serum/serum"),i=require("@saberhq/stableswap-sdk"),o=require("@jup-ag/math"),s=require("jsbi"),a=require("fzstd"),r=require("@mercurial-finance/optimist"),u=require("@project-serum/anchor"),c=require("@project-serum/anchor/dist/cjs/utils/pubkey"),m=require("@solana/spl-token"),d=require("@solana/buffer-layout"),l=require("@noble/hashes/sha256"),p=require("bn.js"),g=require("decimal.js"),h=require("@jup-ag/crema-sdk-v2"),S=require("@jup-ag/cykura-sdk"),f=require("@jup-ag/cykura-sdk-core"),A=require("@jup-ag/deltafi-sdk"),M=require("@pythnetwork/client"),k=require("bignumber.js"),y=require("@jup-ag/goosefx-ssl-sdk"),w=require("@jup-ag/invariant"),P=require("@jup-ag/lifinity-sdk"),T=require("@jup-ag/lifinity-sdk-v2"),b=require("@mercurial-finance/dynamic-amm-sdk"),v=require("@jup-ag/whirlpools-sdk"),I=require("@jup-ag/dradex-sdk"),B=require("@jup-ag/dradex-idl"),D=require("@jup-ag/raydium-clmm-sdk"),O=require("@jup-ag/phoenix-sdk"),R=require("cross-fetch"),L=require("@project-serum/anchor/dist/cjs/utils/bytes");function E(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function F(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}var x=E(t),q=E(s),_=F(a),K=E(p),C=E(g),N=E(R);const V={Raydium:{Openbook:!0}},U={Openbook:!0,Cykura:!0,Meteora:{Lifinity:!0,"Lifinity V2":!0,Balansol:!0,Crema:!0,Dradex:!0,Raydium:!0,"Marco Polo":!0},Crema:{Balansol:!0,Raydium:!0,Lifinity:!0,"Lifinity V2":!0},"Marco Polo":{Lifinity:!0,"Lifinity V2":!0,Balansol:!0,Crema:!0,Dradex:!0,Raydium:!0},Dradex:{Lifinity:!0,"Lifinity V2":!0,Balansol:!0,Crema:!0,Raydium:!0},Balansol:{Raydium:!0},Lifinity:{Raydium:!0},"Lifinity V2":{Raydium:!0}},W={Raydium:!0,GooseFX:!0,Meteora:!0,Serum:!0,Openbook:!0,Dradex:!0,Crema:!0,Lifinity:!0,"Lifinity V2":!0},X=(e,t,n)=>{const i=e[t];if(i){if(!0===i||!0===i["*"])return!0;if(n)return!0===i[n]}return!1},Y=(e,t,n)=>X(e,t,n)||!!n&&X(e,n,t);function j(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map(((n,i)=>e.slice(i*t,(i+1)*t)))}async function z(t,n,i=1e3,o=100){return(await Promise.all(j(n,i).map((async n=>{const i=j(n,o).map((e=>({methodName:"getMultipleAccounts",args:t._buildArgs([e],t.commitment,"base64+zstd")})));return t._rpcBatchRequest(i).then((t=>t.reduce(((t,n)=>(n.result.value.forEach((n=>{if(n){const i=n;i.data=Buffer.from(_.decompress(Buffer.from(n.data[0],"base64"))),i.owner=new e.PublicKey(n.owner),t.push(i)}else t.push(null)})),t)),[]))).catch((e=>n.map((()=>null))))})))).flat()}var G;exports.SwapMode=void 0,(G=exports.SwapMode||(exports.SwapMode={})).ExactIn="ExactIn",G.ExactOut="ExactOut";const Q=(e,t)=>t.map((t=>{const n=e.get(t.toString());if(!n)throw new Error(`Account info ${t.toBase58()} missing`);return n})),Z=e=>e.map((e=>{const t=r.deserializeAccount(e.data);if(!t)throw new Error("Invalid token account");return t})).map((e=>q.default.BigInt(e.amount))),H=async(e,t)=>{const n=e.map((e=>e.getAccountsForUpdate().map((e=>e.toBase58())))).flat(),i=new Map;(await z(t,n)).forEach(((e,t)=>{e&&i.set(n[t],e)}));for(let t of e)t.update(i)},J={version:"0.1.0",name:"jupiter",instructions:[{name:"route",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"destinationTokenAccount",isMut:!1,isSigner:!1}],args:[{name:"swapLeg",type:{defined:"SwapLeg"}},{name:"inAmount",type:"u64"},{name:"quotedOutAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}]},{name:"whirlpoolSwapExactOutput",accounts:[{name:"swapProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"tokenAuthority",isMut:!1,isSigner:!0},{name:"whirlpool",isMut:!0,isSigner:!1},{name:"tokenOwnerAccountA",isMut:!0,isSigner:!1},{name:"tokenVaultA",isMut:!0,isSigner:!1},{name:"tokenOwnerAccountB",isMut:!0,isSigner:!1},{name:"tokenVaultB",isMut:!0,isSigner:!1},{name:"tickArray0",isMut:!0,isSigner:!1},{name:"tickArray1",isMut:!0,isSigner:!1},{name:"tickArray2",isMut:!0,isSigner:!1},{name:"oracle",isMut:!1,isSigner:!1}],args:[{name:"outAmount",type:"u64"},{name:"inAmountWithSlippage",type:{defined:"AmountWithSlippage"}},{name:"aToB",type:"bool"},{name:"platformFeeBps",type:"u8"}]},{name:"raydiumSwapExactOutput",accounts:[{name:"swapProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"ammId",isMut:!0,isSigner:!1},{name:"ammAuthority",isMut:!1,isSigner:!1},{name:"ammOpenOrders",isMut:!0,isSigner:!1},{name:"poolCoinTokenAccount",isMut:!0,isSigner:!1},{name:"poolPcTokenAccount",isMut:!0,isSigner:!1},{name:"serumProgramId",isMut:!1,isSigner:!1},…,exports.MARCO_POLO_STATE_ID=Ue,exports.MARINADE_PROGRAM_ID=ke,exports.MARKETS_URL=ne,exports.MERCURIAL_SWAP_PROGRAM_ID=pe,exports.METEORA_PROGRAM_ID=Ie,exports.METEORA_VAULT_PROGRAM_ID=Be,exports.MIN_SEGMENT_SIZE_FOR_INTERMEDIATE_MINTS=100,exports.MarcoPoloAmm=ti,exports.MarinadeAmm=fn,exports.MercurialAmm=Pn,exports.MeteoraAmm=Bn,exports.OPENBOOK_PROGRAM_ID=Ne,exports.ORCA_V1_PROGRAM_ID=we,exports.ORCA_V2_PROGRAM_ID=Pe,exports.Owner=Bi,exports.PENGUIN_PROGRAM_ID=be,exports.PHOENIX_PROGRAM_ID=Xe,exports.PhoenixAmm=ii,exports.RAYDIUM_AMM_V4_PROGRAM_ID=ie,exports.RAYDIUM_CLMM_PROGRAM_ID=Ce,exports.RaydiumAmm=On,exports.RaydiumClmm=Jn,exports.SABER_ADD_DECIMALS_PROGRAM_ID=ae,exports.SAROS_PROGRAM_ID=ve,exports.SENCHA_PROGRAM_ID=ue,exports.STEPN_PROGRAM_ID=ye,exports.STEP_TOKEN_SWAP_PROGRAM_ID=Te,exports.SWAP_PROTOCOL_TOKENS=Ye,exports.SaberAddDecimalsAmm=Ln,exports.SaberAmm=En,exports.SenchaAmm=xn,exports.SerumAmm=Nn,exports.SplTokenSwapAmm=Xn,exports.SplitTradeAmm=zn,exports.TOKEN_LIST_URL={devnet:"https://api.jup.ag/api/tokens/devnet",testnet:"https://api.jup.ag/api/markets/devnet","mainnet-beta":"https://cache.jup.ag/tokens"},exports.TransactionBuilder=Ii,exports.WHIRLPOOL_PROGRAM_ID=ge,exports.WRAPPED_SOL_MINT=$,exports.WhirlpoolAmm=Zn,exports.ammFactory=ai,exports.executeTransactions=Yi,exports.getEmptyInstruction=()=>({setupInstructions:[],instructions:[],cleanupInstructions:[],signers:[]}),exports.getPlatformFeeAccounts=Ai,exports.getRemoteRouteMap=Wi,exports.getRouteInfoUniqueId=function(e){return e.marketInfos.map((e=>`${e.amm.id}-${e.inputMint}`)).join("-")},exports.indexedRouteMapToRouteMap=Ui,exports.routeMapToIndexedRouteMap=function(e){const{mintToIndexMap:t,indexedRouteMap:n}=Array.from(e).reduce((({mintToIndexMap:e,indexedRouteMap:t},[n,i])=>{const o=Vi(n,e),s=[];for(const t of i){const n=Vi(t,e);s.push(n)}return t[o]=s,{mintToIndexMap:e,indexedRouteMap:t}}),{mintToIndexMap:new Map,indexedRouteMap:{}});return{mintKeys:[...t.keys()],indexedRouteMap:n}},exports.transactionSenderAndConfirmationWaiter=Ti;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ^…
source-map-support.js:722
Error: Account info 66guLcMF3qXkrMyLqDfuNKcHc7B6B36id9ZDDww4hiMv missing
    at /home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:2997
    at Array.map (<anonymous>)
    at Q (/home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:2948)
    at Pn.update (/home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:101265)
    at /home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:193745
    at Map.forEach (<anonymous>)
    at /home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:193730
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Xi.computeRoutes (/home/guillaume/git/jup-sdk-repro/node_modules/@jup-ag/core/dist/core.cjs.development.min.js:1:193450)
    at async Promise.all (index 0)
source-map-support.js:726
```
